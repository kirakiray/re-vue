(()=>{function e(e){let n={data:{},methods:{}};Object.assign(n,e);let{data:s,methods:o}=n,u=document.querySelector(n.el),f=Object.keys(s);Object.defineProperties(this,{[t]:{value:new Map},$el:{enumerable:!0,value:u},[r]:{value:s},[l]:{value:new Set(f)}});let p=new Proxy(this,h);return c(p),f.forEach(e=>{this.emit(`change-${e}`,{value:s[e]})}),Object.assign(this,o),i(s),s[a].bros.push(p),s[a].obsChangeCall=(e=>{this.emit(`change-${e.k}`,{value:s[e.k]})}),p}const t=Symbol("events"),r=Symbol("data"),l=Symbol("keys"),a=Symbol("obs"),n=(e,r)=>{let l=r[t].get(e);return l||(l=[],r[t].set(e,l)),l},s=(e,t)=>{e[a].obsChangeCall&&e[a].obsChangeCall(t),"change"===t.type&&e[a].bros.forEach(e=>{e[t.k]=t.val}),e[a].pars.forEach(t=>{let r;Object.keys(t).some(l=>{let a=t[l];if(e===a)return r=l,!0}),s(t,{type:"up",k:r})})};let o={};["push","pop","shift","unshift","reverse","sort","fill","splice"].forEach(e=>{let t=Array.prototype[e];o[e]={value(...e){e.forEach(e=>i(e,{pars:[this]}));let r=t.call(this,...e);return s(this,{type:"up"}),r}}});const i=(e,t={})=>{if(e instanceof Object&&!e[a]){if(e instanceof Array)e.forEach(t=>{i(t,{pars:[e]})}),Object.defineProperties(e,o);else if(e instanceof Object)for(let t in e){let r=e[t];i(r,{pars:[e]}),Object.defineProperty(e,t,{get:()=>r,set(l){r!==l&&(r=l,s(e,{type:"change",k:t,val:l}))}})}Object.defineProperties(e,{[a]:{value:{pars:t.pars||[],bros:[],obsChangeCall(){}}}})}},c=e=>{let t=e.$el.innerHTML.replace(/\{\{.+?\}\}/g,e=>{let t=e.replace(/\{/g,"").replace(/\}/g,"").trim();return t.includes(".")?e:`<v-span v-key="${t}"></v-span>`});e.$el.innerHTML=t,Array.from(e.$el.querySelectorAll("v-span")).forEach(t=>{let r=t.getAttribute("v-key"),l=new Text,a=t.parentNode;a.insertBefore(l,t),a.removeChild(t),e.on(`change-${r}`,e=>{l.textContent=e.value})}),Array.from(e.$el.querySelectorAll("[v-for]")).forEach(t=>{let r=t.getAttribute("v-for").split(" in "),l=t.innerText,a=(l=l.replace(/\{/g,"").replace(/}/g,"").trim()).split(".");t.removeAttribute("v-for"),t.innerText="";let n=t.outerHTML,s=new Text;t.parentNode.insertBefore(s,t),t.parentNode.removeChild(t);let o=[];e.on(`change-${r[1]}`,e=>{o.forEach(e=>{e.parentNode.removeChild(e)}),o=[],e.value.forEach(e=>{let t=(e=>{let t=document.createElement("div");t.innerHTML=e;let r=t.children[0];return t.removeChild(r),r})(n);o.push(t),t.innerHTML=e[a[1]],s.parentNode.insertBefore(t,s)})})}),Array.from(e.$el.querySelectorAll("*")).forEach(t=>{Array.from(t.attributes).forEach(r=>{let l=r.name,a=r.value;if(/^v\-bind:/.test(l)){switch(l.replace(/^v\-bind:/,"")){case"title":e.on(`change-${a}`,e=>{t.setAttribute("title",e.value)})}t.attributes.removeNamedItem(l)}if(/^v\-if/.test(l)&&e.on(`change-${a}`,e=>{e.value?t.style.display="":t.style.display="none"}),/^v\-on:/.test(l)){let r=l.replace(/^v\-on:/,"");t.addEventListener(r,()=>{e[a]()})}/^v\-model/.test(l)&&(t.addEventListener("input",function(){e[a]=this.value}),e.on(`change-${a}`,e=>{t.value=e.value}))})})};Object.assign(e.prototype,{on(e,t){n(e,this).push({callback:t})},off(e,r){if(e)if(r){let l=n(e,this).findIndex(e=>e.callback==r);l>-1&&this[t].splice(l,1)}else this[t].delete(e)},emit(e,t){n(e,this).forEach(e=>{e.callback(t)})}});const h={get:function(e,t,a){return e[l].has(t)?e[r][t]:Reflect.get(e,t,a)},set:function(e,t,a,n){return e[l].has(t)?(e[r][t]=a,e.emit(`change-${t}`,{value:a}),!0):Reflect.set(e,t,a,n)}};window.Vue=e})();